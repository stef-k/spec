---
id: T-005
title: Legend expanding bottom sheet (scrollable) with selection
status: todo
labels: [ui]
deps: [T-001, T-004]
owner: ""
inputs:
  - Groups.md
outputs: []
timebox: "2h"
---

## Summary
Build an expanding bottom sheet over the map for the member legend, following Material “expanding bottom sheet” behavior. Show color chips, usernames, display names, and checkboxes for selection, with Select All/None and “Only this”. Persist expanded/collapsed state.

## Acceptance Criteria (measurable)
- [ ] Bottom sheet expands/collapses smoothly; content is scrollable.
- [ ] Legend lists members with color chips, username + display name.
- [ ] Selection toggles update displayed members; “Only this” isolates one member.
- [ ] Expanded/collapsed state is persisted across app launches.

## Steps
- [ ] Read inputs
- [ ] Implement sheet UI and gestures/animations
- [ ] Bind data to members list with colors from T-004
- [ ] Wire selection events to map layer visibility
- [ ] Persist state in SettingsStore (`MyGroups_LegendExpanded`)

## Verification
- Command: `dotnet build -c Debug`
- Manual: Toggle legend, select/deselect members, restart app; verify state.

## Notes
Prefer minimal dependencies; reuse existing control patterns.

